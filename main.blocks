<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="2yj~%.}+boEc[zb7M+Q{">buf</variable><variable id="fZ*r{8$I/tLYieV2aD^c">_wbuf</variable><variable id="d5fu!},BWlChgASzU^c!">result</variable><variable id="OD7qge%/H$;%HiQw{#Fr">APDS9960_ADDRESS</variable><variable id="s;DB!E+eG!Fn^AM|){v3">t</variable><variable id="y}BPnY!DH[F6Tnk:i5i8">APDS9960_ENABLE</variable><variable id="ja?q{JLMe/Of!1l%gvz9">l</variable><variable id="N52R71LNYRLh6`+*ChMl">m</variable><variable id="5d#Op(nedQiXejM5.BCS">APDS9960_STATUS</variable><variable id="_(`}AJlT{Nvh6f{=o;)A">c</variable><variable id="j?d!mm~(3/(nN1%B(_7$">APDS9960_CDATAL</variable><variable id="v:^tA9T-=WC1`tu9i:!o">r</variable><variable id="rn#b7@2q;_ml1z}ISe0%">APDS9960_RDATAL</variable><variable id="hf*:34yvyNL)Euc~BzBO">g</variable><variable id="v#mZ]CjsZ~uyUW{@MHSI">APDS9960_GDATAL</variable><variable id="GVj0?-b|H0[#F(52bun$">b</variable><variable id="ojn4sd}=cIWk#acc3R?u">APDS9960_BDATAL</variable><variable id="C$ifFFZZcZr.KY4oxT)g">APDS9960_ATIME</variable><variable id="?J!)Xkd~^9rk{}:(kD;M">APDS9960_WTIME</variable><variable id="D)J2hPnFga*:%I[Q//M$">APDS9960_AILTIL</variable><variable id="AL9rO_elH[M@4qaP@gMq">APDS9960_AILTH</variable><variable id="XQU!L`S.,ex#x/l,:@vb">APDS9960_AIHTL</variable><variable id="IQMG5eC,Fl79`qe[{@=x">APDS9960_AIHTH</variable><variable id="[~@`fXHx0!=pDjCLzUz^">APDS9960_PILT</variable><variable id="_d.jQXie4V7Ie9P}R,ca">APDS9960_PIHT</variable><variable id="a/Z7uVHKU*(Ba(N4RX#K">APDS9960_PERS</variable><variable id="ul8,t~:P}ActNFA}u#:s">APDS9960_CONFIG1</variable><variable id="A,/eGVL41h!d0x1_$TVD">APDS9960_PPULSE</variable><variable id="he{K.2W-%O~78%z2_q++">APDS9960_CONTROL</variable><variable id="1*J@fORHgQpMB|AT9C1J">APDS9960_CONFIG2</variable><variable id="ciWaib7c[1DYALKk2B)?">APDS9960_ID</variable><variable id="u2pS!9_yJ2{A%-n[!~i8">APDS9960_CDATAH</variable><variable id="w6TfzgD#EU8|=tg^D?!F">APDS9960_RDATAH</variable><variable id="@{o3{~noON4k#PzC3_HH">APDS9960_GDATAH</variable><variable id="V,1iln$l!/`f=Yb:P[DI">APDS9960_BDATAH</variable><variable id="{Z[`TK8Cqc@69^2N,Ie!">APDS9960_PDATA</variable><variable id="iu-pIyD=_*Q,1l;|y0gr">APDS9960_POFFSET_UR</variable><variable id="*beHrTGYJ!f/%{zv0Q7Z">APDS9960_POFFSET_DL</variable><variable id=";Iyrxm(C;w9#iroi@xD:">APDS9960_CONFIG3</variable><variable id="A=.OW(NSy{@3vu6-p:@[">APDS9960_GPENTH</variable><variable id="@5,_VSTt/].$7P{I|41/">APDS9960_GEXTH</variable><variable id="d6_I(G9SvzM_dCDb9-|T">APDS9960_GCONF1</variable><variable id="E=KtD+}DjqMKce{[yR24">APDS9960_GCONF2</variable><variable id="ecf05gF3vS[(|oWV;!mx">APDS9960_GOFFSET_U</variable><variable id="Rp3K2m5?UlU*Wlum0e)H">APDS9960_GOFFSET_D</variable><variable id="ZlW]y7g[,t4#(IL`BU(L">APDS9960_GOFFSET_L</variable><variable id="e9#~5[xM{~z+N]FZX}Hj">APDS9960_GOFFSET_R</variable><variable id="R[1(m$5pGR3dUs=-Qh8C">APDS9960_GPULSE</variable><variable id="u[}D{k-e/+BVwE+,P(*{">APDS9960_GCONF3</variable><variable id="?OioIx6bz1tbf^7i3mCO">APDS9960_GCONF4</variable><variable id="o[G^jiq7Nj#mC4})_YxB">APDS9960_GFLVL</variable><variable id="?@@}#JJuIo_eN}5u.=6W">APDS9960_GSTATUS</variable><variable id=";m[e|F_A$cX^x}O_}]*)">APDS9960_IFORCE</variable><variable id="%pF;RO@dsTZ1WOn1]?TH">APDS9960_PICLEAR</variable><variable id="$S6tO$ju~ebk@N384nds">APDS9960_CICLEAR</variable><variable id="F(GnF|_b4!Er?qqkTnRP">APDS9960_AICLEAR</variable><variable id="bLp:^vDv^1^:EFI;5WQ.">APDS9960_GFIFO_U</variable><variable id="E)]o7|_h8}@)b^9ux`uF">APDS9960_GFIFO_D</variable><variable id="#iioW)5/(qTI0:f$@Ng[">APDS9960_GFIFO_L</variable><variable id="*1JIdBWF23ngTyHz@aXD">APDS9960_GFIFO_R</variable></variables><comment data="0" x="0" y="0" h="120" w="410">ALS Enable
@param en is enable/disable ALS, eg: true</comment><comment data="1" x="0" y="0" h="360" w="410">function ALSEnable(en: boolean = true) {
let t = getReg(APDS9960_ENABLE)
t &amp;= 0b00000010
//if (en) t |= 2
setReg(APDS9960_ENABLE, t)
basic.pause(10)
}
function WaitEnable(en: boolean = true) {
let t = getReg(APDS9960_ENABLE)
t &amp;= 0b00001000
//if (en) t |= 4
setReg(APDS9960_ENABLE, t)
basic.pause(10)
}</comment><comment data="2" x="0" y="0" h="120" w="160">Initialize</comment><comment data="3" x="0" y="0" h="120" w="480">makecode APDS9930 Digital Proximity and Ambient Light Sensor package.
From microbit/micropython Chinese community.
http://www.micropython.org.cn</comment><block type="function_definition" x="10" y="10"><mutation name="set2Reg" functionid="JN`Vm6K|VXk0l{0#gl)}"><arg name="command" id="9lqg6xp7icye5s3h0wank" type="number"></arg></mutation><field name="function_name">set2Reg</field><comment pinned="false" h="80" w="160">set APDS9930's reg</comment><statement name="STACK"><block type="typescript_statement" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let buf = pins.createBuffer(2);" numlines="1" declaredvars="buf"></mutation><next><block type="lists_index_set"><comment pinned="false" h="80" w="160">basic.pause(10)
basic.pause(10)</comment><value name="LIST"><block type="variables_get"><field name="VAR" id="2yj~%.}+boEc[zb7M+Q{">buf</field></block></value><value name="INDEX"><shadow type="math_number"><field name="NUM">1</field></shadow></value><value name="VALUE"><block type="typescript_expression" editable="false"><field name="EXPRESSION">command &gt;&gt; 8</field></block></value><next><block type="lists_index_set"><value name="LIST"><block type="variables_get"><field name="VAR" id="2yj~%.}+boEc[zb7M+Q{">buf</field></block></value><value name="INDEX"><shadow type="math_number"><field name="NUM">0</field></shadow></value><value name="VALUE"><block type="typescript_expression" editable="false"><field name="EXPRESSION">command &amp; 0xFF</field></block></value><next><block type="function_return"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" editable="false"><field name="EXPRESSION">pins.i2cWriteBuffer(APDS9960_ADDRESS, buf)</field></block></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" x="10" y="10"><mutation name="setReg" functionid=";$#N_Be[II~p5Pi#@4gf"><arg name="reg" id="1ouo21q178vumv09yzsb" type="number"></arg><arg name="dat" id="1fygmn8cumm8nnf2voj4h" type="number"></arg></mutation><field name="function_name">setReg</field><statement name="STACK"><block type="typescript_statement" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let _wbuf = pins.createBuffer(2);" numlines="1" declaredvars="_wbuf"></mutation><next><block type="lists_index_set"><value name="LIST"><block type="variables_get"><field name="VAR" id="fZ*r{8$I/tLYieV2aD^c">_wbuf</field></block></value><value name="INDEX"><shadow type="math_number"><field name="NUM">0</field></shadow></value><value name="VALUE"><block type="argument_reporter_number"><field name="VALUE">reg</field></block></value><next><block type="lists_index_set"><value name="LIST"><block type="variables_get"><field name="VAR" id="fZ*r{8$I/tLYieV2aD^c">_wbuf</field></block></value><value name="INDEX"><shadow type="math_number"><field name="NUM">1</field></shadow></value><value name="VALUE"><block type="argument_reporter_number"><field name="VALUE">dat</field></block></value><next><block type="typescript_statement" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pins.i2cWriteBuffer(APDS9960_ADDRESS, _wbuf);" numlines="1"></mutation></block></next></block></next></block></next></block></statement></block><block type="function_definition" x="10" y="10"><mutation name="read_buf_8" functionid="pYO1h%?Kq9By1AKm|mNV"><arg name="cmd" id="u5yqliw1w74x9ul1j6m1" type="number"></arg></mutation><field name="function_name">read_buf_8</field><statement name="STACK"><block type="typescript_statement" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let i2cbuf = pins.i2cReadBuffer(APDS9960_ADDRESS, pins.sizeOf(NumberFormat.UInt8BE) * 7, false)" numlines="1" declaredvars="i2cbuf"></mutation><next><block type="typescript_statement" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let result = i2cbuf[0] &lt;&lt; 8;" numlines="1" declaredvars="result"></mutation><next><block type="typescript_statement" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="result |= i2cbuf[1];" numlines="1"></mutation><next><block type="function_return"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="80" w="160">basic.pause(10)</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get"><field name="VAR" id="d5fu!},BWlChgASzU^c!">result</field></block></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" x="10" y="10"><mutation name="getReg" functionid="M]OFr*s=Ka%3h${f/JfA"><arg name="reg" id="7dz3l6vu4kka4rtjh92lo" type="number"></arg></mutation><field name="function_name">getReg</field><statement name="STACK"><block type="i2c_writenumber"><field name="format">NumberFormat.UInt8BE</field><value name="address"><block type="variables_get"><field name="VAR" id="OD7qge%/H$;%HiQw{#Fr">APDS9960_ADDRESS</field></block></value><value name="value"><block type="argument_reporter_number"><field name="VALUE">reg</field></block></value><next><block type="function_return"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="pins_i2c_readnumber"><field name="format">NumberFormat.UInt8BE</field><value name="address"><block type="variables_get"><field name="VAR" id="OD7qge%/H$;%HiQw{#Fr">APDS9960_ADDRESS</field></block></value></block></value></block></next></block></statement></block><block type="function_definition" x="10" y="10"><mutation name="Power_enable" functionid="y[mB=)TP6`oPD9,F,oH2"></mutation><field name="function_name">Power_enable</field><comment pinned="false" h="80" w="160">Power On</comment><statement name="STACK"><block type="variables_set"><field name="VAR" id="s;DB!E+eG!Fn^AM|){v3">t</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output"><mutation name="getReg" functionid="M]OFr*s=Ka%3h${f/JfA"><arg name="reg" id="7dz3l6vu4kka4rtjh92lo" type="number"></arg></mutation><value name="7dz3l6vu4kka4rtjh92lo"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="y}BPnY!DH[F6Tnk:i5i8">APDS9960_ENABLE</field></block></value></block></value><next><block type="typescript_statement" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="t &amp;= 0x1B" numlines="1"></mutation><next><block type="function_call"><mutation name="setReg" functionid=";$#N_Be[II~p5Pi#@4gf"><arg name="reg" id="1ouo21q178vumv09yzsb" type="number"></arg><arg name="dat" id="1fygmn8cumm8nnf2voj4h" type="number"></arg></mutation><value name="1ouo21q178vumv09yzsb"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="y}BPnY!DH[F6Tnk:i5i8">APDS9960_ENABLE</field></block></value><value name="1fygmn8cumm8nnf2voj4h"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="s;DB!E+eG!Fn^AM|){v3">t</field></block></value><next><block type="device_pause"><value name="pause"><shadow type="timePicker"><field name="ms">3</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" x="10" y="10"><mutation name="init" functionid="W-Is|+/_Fq*t0}onSbWp"></mutation><field name="function_name">init</field><comment pinned="false" h="80" w="160">% blockId="APDS9960_INIT" block="APDS9960 Initialize"
% weight=210 blockGap=8
ALSEnable()
setReg(APDS9960_ENABLE, 0)
setReg(APDS9960_ATIME, 0xFF)
setReg(APDS9960_WTIME, 0xFF)
setReg(APDS9960_PERS, 0)
setReg(APDS9960_CONFIG1, 0X40)
setReg(APDS9960_CONTROL, 0)
WaitEnable(true)
basic.pause(10)</comment><data>0;1;2</data><statement name="STACK"><block type="function_call"><mutation name="Power_enable" functionid="y[mB=)TP6`oPD9,F,oH2"></mutation></block></statement></block><block type="pxt-on-start" x="20" y="20"><statement name="HANDLER"><block type="variables_set"><field name="VAR" id="OD7qge%/H$;%HiQw{#Fr">APDS9960_ADDRESS</field><data>3</data><value name="VALUE"><shadow type="math_number"><field name="NUM">57</field></shadow></value><next><block type="variables_set"><field name="VAR" id="y}BPnY!DH[F6Tnk:i5i8">APDS9960_ENABLE</field><value name="VALUE"><shadow type="math_number"><field name="NUM">128</field></shadow></value><next><block type="variables_set"><field name="VAR" id="C$ifFFZZcZr.KY4oxT)g">APDS9960_ATIME</field><value name="VALUE"><shadow type="math_number"><field name="NUM">129</field></shadow></value><next><block type="variables_set"><field name="VAR" id="?J!)Xkd~^9rk{}:(kD;M">APDS9960_WTIME</field><value name="VALUE"><shadow type="math_number"><field name="NUM">131</field></shadow></value><next><block type="variables_set"><field name="VAR" id="D)J2hPnFga*:%I[Q//M$">APDS9960_AILTIL</field><value name="VALUE"><shadow type="math_number"><field name="NUM">132</field></shadow></value><next><block type="variables_set"><field name="VAR" id="AL9rO_elH[M@4qaP@gMq">APDS9960_AILTH</field><value name="VALUE"><shadow type="math_number"><field name="NUM">133</field></shadow></value><next><block type="variables_set"><field name="VAR" id="XQU!L`S.,ex#x/l,:@vb">APDS9960_AIHTL</field><value name="VALUE"><shadow type="math_number"><field name="NUM">134</field></shadow></value><next><block type="variables_set"><field name="VAR" id="IQMG5eC,Fl79`qe[{@=x">APDS9960_AIHTH</field><value name="VALUE"><shadow type="math_number"><field name="NUM">135</field></shadow></value><next><block type="variables_set"><field name="VAR" id="[~@`fXHx0!=pDjCLzUz^">APDS9960_PILT</field><value name="VALUE"><shadow type="math_number"><field name="NUM">137</field></shadow></value><next><block type="variables_set"><field name="VAR" id="_d.jQXie4V7Ie9P}R,ca">APDS9960_PIHT</field><value name="VALUE"><shadow type="math_number"><field name="NUM">139</field></shadow></value><next><block type="variables_set"><field name="VAR" id="a/Z7uVHKU*(Ba(N4RX#K">APDS9960_PERS</field><value name="VALUE"><shadow type="math_number"><field name="NUM">140</field></shadow></value><next><block type="variables_set"><field name="VAR" id="ul8,t~:P}ActNFA}u#:s">APDS9960_CONFIG1</field><value name="VALUE"><shadow type="math_number"><field name="NUM">141</field></shadow></value><next><block type="variables_set"><field name="VAR" id="A,/eGVL41h!d0x1_$TVD">APDS9960_PPULSE</field><value name="VALUE"><shadow type="math_number"><field name="NUM">142</field></shadow></value><next><block type="variables_set"><field name="VAR" id="he{K.2W-%O~78%z2_q++">APDS9960_CONTROL</field><value name="VALUE"><shadow type="math_number"><field name="NUM">143</field></shadow></value><next><block type="variables_set"><field name="VAR" id="1*J@fORHgQpMB|AT9C1J">APDS9960_CONFIG2</field><value name="VALUE"><shadow type="math_number"><field name="NUM">144</field></shadow></value><next><block type="variables_set"><field name="VAR" id="ciWaib7c[1DYALKk2B)?">APDS9960_ID</field><value name="VALUE"><shadow type="math_number"><field name="NUM">146</field></shadow></value><next><block type="variables_set"><field name="VAR" id="5d#Op(nedQiXejM5.BCS">APDS9960_STATUS</field><value name="VALUE"><shadow type="math_number"><field name="NUM">147</field></shadow></value><next><block type="variables_set"><field name="VAR" id="j?d!mm~(3/(nN1%B(_7$">APDS9960_CDATAL</field><value name="VALUE"><shadow type="math_number"><field name="NUM">148</field></shadow></value><next><block type="variables_set"><field name="VAR" id="u2pS!9_yJ2{A%-n[!~i8">APDS9960_CDATAH</field><value name="VALUE"><shadow type="math_number"><field name="NUM">149</field></shadow></value><next><block type="variables_set"><field name="VAR" id="rn#b7@2q;_ml1z}ISe0%">APDS9960_RDATAL</field><value name="VALUE"><shadow type="math_number"><field name="NUM">150</field></shadow></value><next><block type="variables_set"><field name="VAR" id="w6TfzgD#EU8|=tg^D?!F">APDS9960_RDATAH</field><value name="VALUE"><shadow type="math_number"><field name="NUM">151</field></shadow></value><next><block type="variables_set"><field name="VAR" id="v#mZ]CjsZ~uyUW{@MHSI">APDS9960_GDATAL</field><value name="VALUE"><shadow type="math_number"><field name="NUM">152</field></shadow></value><next><block type="variables_set"><field name="VAR" id="@{o3{~noON4k#PzC3_HH">APDS9960_GDATAH</field><value name="VALUE"><shadow type="math_number"><field name="NUM">153</field></shadow></value><next><block type="variables_set"><field name="VAR" id="ojn4sd}=cIWk#acc3R?u">APDS9960_BDATAL</field><value name="VALUE"><shadow type="math_number"><field name="NUM">154</field></shadow></value><next><block type="variables_set"><field name="VAR" id="V,1iln$l!/`f=Yb:P[DI">APDS9960_BDATAH</field><value name="VALUE"><shadow type="math_number"><field name="NUM">155</field></shadow></value><next><block type="variables_set"><field name="VAR" id="{Z[`TK8Cqc@69^2N,Ie!">APDS9960_PDATA</field><value name="VALUE"><shadow type="math_number"><field name="NUM">156</field></shadow></value><next><block type="variables_set"><field name="VAR" id="iu-pIyD=_*Q,1l;|y0gr">APDS9960_POFFSET_UR</field><value name="VALUE"><shadow type="math_number"><field name="NUM">157</field></shadow></value><next><block type="variables_set"><field name="VAR" id="*beHrTGYJ!f/%{zv0Q7Z">APDS9960_POFFSET_DL</field><value name="VALUE"><shadow type="math_number"><field name="NUM">158</field></shadow></value><next><block type="variables_set"><field name="VAR" id=";Iyrxm(C;w9#iroi@xD:">APDS9960_CONFIG3</field><value name="VALUE"><shadow type="math_number"><field name="NUM">159</field></shadow></value><next><block type="variables_set"><field name="VAR" id="A=.OW(NSy{@3vu6-p:@[">APDS9960_GPENTH</field><value name="VALUE"><shadow type="math_number"><field name="NUM">160</field></shadow></value><next><block type="variables_set"><field name="VAR" id="@5,_VSTt/].$7P{I|41/">APDS9960_GEXTH</field><value name="VALUE"><shadow type="math_number"><field name="NUM">161</field></shadow></value><next><block type="variables_set"><field name="VAR" id="d6_I(G9SvzM_dCDb9-|T">APDS9960_GCONF1</field><value name="VALUE"><shadow type="math_number"><field name="NUM">162</field></shadow></value><next><block type="variables_set"><field name="VAR" id="E=KtD+}DjqMKce{[yR24">APDS9960_GCONF2</field><value name="VALUE"><shadow type="math_number"><field name="NUM">163</field></shadow></value><next><block type="variables_set"><field name="VAR" id="ecf05gF3vS[(|oWV;!mx">APDS9960_GOFFSET_U</field><value name="VALUE"><shadow type="math_number"><field name="NUM">164</field></shadow></value><next><block type="variables_set"><field name="VAR" id="Rp3K2m5?UlU*Wlum0e)H">APDS9960_GOFFSET_D</field><value name="VALUE"><shadow type="math_number"><field name="NUM">165</field></shadow></value><next><block type="variables_set"><field name="VAR" id="ZlW]y7g[,t4#(IL`BU(L">APDS9960_GOFFSET_L</field><value name="VALUE"><shadow type="math_number"><field name="NUM">167</field></shadow></value><next><block type="variables_set"><field name="VAR" id="e9#~5[xM{~z+N]FZX}Hj">APDS9960_GOFFSET_R</field><value name="VALUE"><shadow type="math_number"><field name="NUM">169</field></shadow></value><next><block type="variables_set"><field name="VAR" id="R[1(m$5pGR3dUs=-Qh8C">APDS9960_GPULSE</field><value name="VALUE"><shadow type="math_number"><field name="NUM">166</field></shadow></value><next><block type="variables_set"><field name="VAR" id="u[}D{k-e/+BVwE+,P(*{">APDS9960_GCONF3</field><value name="VALUE"><shadow type="math_number"><field name="NUM">170</field></shadow></value><next><block type="variables_set"><field name="VAR" id="?OioIx6bz1tbf^7i3mCO">APDS9960_GCONF4</field><value name="VALUE"><shadow type="math_number"><field name="NUM">171</field></shadow></value><next><block type="variables_set"><field name="VAR" id="o[G^jiq7Nj#mC4})_YxB">APDS9960_GFLVL</field><value name="VALUE"><shadow type="math_number"><field name="NUM">174</field></shadow></value><next><block type="variables_set"><field name="VAR" id="?@@}#JJuIo_eN}5u.=6W">APDS9960_GSTATUS</field><value name="VALUE"><shadow type="math_number"><field name="NUM">175</field></shadow></value><next><block type="variables_set"><field name="VAR" id=";m[e|F_A$cX^x}O_}]*)">APDS9960_IFORCE</field><value name="VALUE"><shadow type="math_number"><field name="NUM">228</field></shadow></value><next><block type="variables_set"><field name="VAR" id="%pF;RO@dsTZ1WOn1]?TH">APDS9960_PICLEAR</field><value name="VALUE"><shadow type="math_number"><field name="NUM">229</field></shadow></value><next><block type="variables_set"><field name="VAR" id="$S6tO$ju~ebk@N384nds">APDS9960_CICLEAR</field><value name="VALUE"><shadow type="math_number"><field name="NUM">230</field></shadow></value><next><block type="variables_set"><field name="VAR" id="F(GnF|_b4!Er?qqkTnRP">APDS9960_AICLEAR</field><value name="VALUE"><shadow type="math_number"><field name="NUM">231</field></shadow></value><next><block type="variables_set"><field name="VAR" id="bLp:^vDv^1^:EFI;5WQ.">APDS9960_GFIFO_U</field><value name="VALUE"><shadow type="math_number"><field name="NUM">252</field></shadow></value><next><block type="variables_set"><field name="VAR" id="E)]o7|_h8}@)b^9ux`uF">APDS9960_GFIFO_D</field><value name="VALUE"><shadow type="math_number"><field name="NUM">253</field></shadow></value><next><block type="variables_set"><field name="VAR" id="#iioW)5/(qTI0:f$@Ng[">APDS9960_GFIFO_L</field><value name="VALUE"><shadow type="math_number"><field name="NUM">254</field></shadow></value><next><block type="variables_set"><field name="VAR" id="*1JIdBWF23ngTyHz@aXD">APDS9960_GFIFO_R</field><value name="VALUE"><shadow type="math_number"><field name="NUM">255</field></shadow></value><next><block type="APDS9960_INIT"><comment pinned="false" h="80" w="160">APDS9930 mudule</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" x="225" y="20"><comment pinned="false" h="80" w="160">basic.pause(1000)
basic.showNumber(g)</comment><statement name="HANDLER"><block type="variables_set"><field name="VAR" id="ja?q{JLMe/Of!1l%gvz9">l</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output"><mutation name="getReg" functionid="M]OFr*s=Ka%3h${f/JfA"><arg name="reg" id="7dz3l6vu4kka4rtjh92lo" type="number"></arg></mutation><value name="7dz3l6vu4kka4rtjh92lo"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="y}BPnY!DH[F6Tnk:i5i8">APDS9960_ENABLE</field></block></value></block></value><next><block type="variables_set"><field name="VAR" id="N52R71LNYRLh6`+*ChMl">m</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output"><mutation name="getReg" functionid="M]OFr*s=Ka%3h${f/JfA"><arg name="reg" id="7dz3l6vu4kka4rtjh92lo" type="number"></arg></mutation><value name="7dz3l6vu4kka4rtjh92lo"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="5d#Op(nedQiXejM5.BCS">APDS9960_STATUS</field></block></value></block></value><next><block type="variables_set"><field name="VAR" id="_(`}AJlT{Nvh6f{=o;)A">c</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output"><mutation name="getReg" functionid="M]OFr*s=Ka%3h${f/JfA"><arg name="reg" id="7dz3l6vu4kka4rtjh92lo" type="number"></arg></mutation><value name="7dz3l6vu4kka4rtjh92lo"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="j?d!mm~(3/(nN1%B(_7$">APDS9960_CDATAL</field></block></value></block></value><next><block type="variables_set"><field name="VAR" id="v:^tA9T-=WC1`tu9i:!o">r</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output"><mutation name="getReg" functionid="M]OFr*s=Ka%3h${f/JfA"><arg name="reg" id="7dz3l6vu4kka4rtjh92lo" type="number"></arg></mutation><value name="7dz3l6vu4kka4rtjh92lo"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="rn#b7@2q;_ml1z}ISe0%">APDS9960_RDATAL</field></block></value></block></value><next><block type="variables_set"><field name="VAR" id="hf*:34yvyNL)Euc~BzBO">g</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output"><mutation name="getReg" functionid="M]OFr*s=Ka%3h${f/JfA"><arg name="reg" id="7dz3l6vu4kka4rtjh92lo" type="number"></arg></mutation><value name="7dz3l6vu4kka4rtjh92lo"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="v#mZ]CjsZ~uyUW{@MHSI">APDS9960_GDATAL</field></block></value></block></value><next><block type="variables_set"><field name="VAR" id="GVj0?-b|H0[#F(52bun$">b</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output"><mutation name="getReg" functionid="M]OFr*s=Ka%3h${f/JfA"><arg name="reg" id="7dz3l6vu4kka4rtjh92lo" type="number"></arg></mutation><value name="7dz3l6vu4kka4rtjh92lo"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR" id="ojn4sd}=cIWk#acc3R?u">APDS9960_BDATAL</field></block></value></block></value><next><block type="device_show_number"><comment pinned="false" h="80" w="160">serial.writeNumber(r)
basic.pause(100)
}
This only uses RGB ... how can we integrate clear or calculate lux
based exclusively on clear since this might be more reliable?
let illuminance = (-0.32466 * r) + (1.57837 * g) + (-0.73191 * b);</comment><value name="number"><block type="variables_get"><field name="VAR" id="ja?q{JLMe/Of!1l%gvz9">l</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>